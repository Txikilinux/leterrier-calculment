#!/usr/bin/make -f

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/qmake.mk

# Add here any variable or target overrides you need.
QMAKE=qmake-qt4
QTDIR=/usr
QTPLUGINS=/usr/lib/qt4/plugins
MAKE=make -j4
CFLAGS=-O3
CXXFLAGS=-O3
DEST=/usr/share/leterrier-calcul-mental
EXECDEST=/usr/lib/leterrier-calcul-mental
BUILDTEMP=$(CURDIR)/debian/leterrier-calcul-mental

MANPAGES := $(CURDIR)/debian/leterrier-calcul-mental.1

install/leterrier-calcul-mental::
	mkdir -p $(BUILDTEMP)/usr/bin/
	mkdir -p $(BUILDTEMP)/$(EXECDEST)
	mkdir -p $(BUILDTEMP)/$(DEST)/lang
	mkdir -p $(BUILDTEMP)/$(DEST)/conf
	mkdir -p $(BUILDTEMP)/$(DEST)/data
	mkdir -p $(BUILDTEMP)/usr/share/applications
	cp -a $(CURDIR)/debian/leterrier-calcul-mental.wrapper $(BUILDTEMP)/usr/bin/leterrier-calcul-mental
	cp -a $(CURDIR)/debian/*.desktop $(BUILDTEMP)/usr/share/applications/
	cp -a $(CURDIR)/lang/*.qm $(BUILDTEMP)/$(DEST)/lang
	cp -a $(CURDIR)/conf/*.conf $(BUILDTEMP)/$(DEST)/conf
	cp -a $(CURDIR)/data/* $(BUILDTEMP)/$(DEST)/data
	cp -a $(CURDIR)/*.png $(BUILDTEMP)/$(DEST)/
	cp -a $(CURDIR)/leterrier-calcul-mental $(BUILDTEMP)/$(EXECDEST)/

	#special jaunty, please copy all libs to app lib dir
	#install -D --mode=0755 $(QTDIR)/lib/libQtCore.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtXml.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtXmlPatterns.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtMultimedia.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtNetwork.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtDBus.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtGui.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libphonon.so.4 $(BUILDTEMP)/$(EXECDEST)

	#install -D --mode=0755 $(QTDIR)/lib/libQtWebKit.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtScript.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtDesigner.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtDBus.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtOpenGL.so.4 $(BUILDTEMP)/$(EXECDEST)
	#install -D --mode=0755 $(QTDIR)/lib/libQtSvg.so.4 $(BUILDTEMP)/$(EXECDEST)

	#and plugins (phonon backend, jpeg and co)
	#cp -a $(QTPLUGINS)/imageformats $(BUILDTEMP)/$(EXECDEST)/
	#mkdir -p $(BUILDTEMP)/$(EXECDEST)/phonon_backend

